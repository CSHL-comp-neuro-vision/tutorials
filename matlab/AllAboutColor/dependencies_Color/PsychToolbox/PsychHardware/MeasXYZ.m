function [XYZ,qual] = MeasXYZ% [XYZ,qual] = MeasXYZ%% Measues XYZ tristimulus coordinates, luminance in% cd/m^2.%% Tries to handle low light level case gracefully.%% Does not work on PC.  Use MeasSpd and compute down% to XYZ.  Actally, all versions could work that way.%%	9/14/93		jms		Added global no hardware switch%	10/1/93		dhb		Removed print on low light, passed qual on up%	10/4/93		dhb		Handle quality code 18 properly%	1/16/94		jms		Removed 'exist' check and declared globals.%	2/20/94		dhb		Modified to use CMETER.%	8/9/94		dhb		Handle sync mode error condition.%  9/7/94		dhb		Remove sync mode message.% Initial measurmentsqual = CMETER('Measure');% Check for sync mode error condition.  If we are in% sync mode, try DC. if (qual == 7 | qual == 8)	%disp('Cannot sync, measuring in DC mode');	CMETER('SetParams',0,0,1);	qual = CMETER('Measure');end% Handle other error conditionsif (qual == -1)  error('No or bad response from colorimeter');elseif (qual == 10)  %disp('Low light level during measurement');  %disp('Setting returned value to zero');  XYZ = zeros(3,1);elseif (qual == 18)  XYZ = CMETER('XYZ');elseif (qual ~= 0)  error(sprintf('Bad return code %g from meter',qual));else  XYZ = CMETER('XYZ');end