function CMCheckInit(portName)% CMCheckInit([portName])%% Initialize the color meter.  The routine calls the% lower level CMETER.  If the low level routine% fails, the one prompts the user to take appropriate% action.  If the low level routine succeeds, this% routine  is silent.%% 9/15/93  	dhb		Modified to use new CMInit properly.% 1/18/94   jms		Added gHardware switch% 1/24/94	dhb		Changed sign of gHardware switch.% 2/20/94	dhb		Call through CMETER rather than CM... routines.% 4/4/00    dhb      Optional port name, only used on SERIAL version.% Set default port nameif (nargin < 1 | isempty(portName))   if (strcmp(computer,'PCWIN'))      portName = 'COM5';   else      portName = '.Aout';   endend % Windows version.  Make it work the same as the Mac version.if strcmp(computer,'PCWIN')		stat = cmeterinit(portName);						status = sscanf(stat,'%f');		if (isempty(status) | status == -1)		  disp('If colorimeter is off, turn it on');		end		while (isempty(status) | status == -1)	 	 stat = cmeterinit(portName);		 status = sscanf(stat,'%f');		end% Mac versionelse	status = CMETER('Init');	if (status == -1)	  disp('If colorimeter is off, turn it on');	end	while (status == -1)	  status = CMETER('Init');	endend