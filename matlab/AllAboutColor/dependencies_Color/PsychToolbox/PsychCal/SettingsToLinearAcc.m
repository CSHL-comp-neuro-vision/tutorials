function [linear,deviceE] = SettingsToLinearAcc(cal,settings)% [linear,deviceE] = SettingsToLinearAcc(cal,settings)%% Convert from device setting coordinates to% linear color space coordinates.  Uses full% basis function measurements in doing% conversions so that it can compensate for% device primary spectral shifts..% 11/12/93  dhb   Wrote it.% 11/15/93  dhb   Added deviceE output.% 8/4/96    dhb   Update for stuff bag routines.% 8/21/97	dhb	  Update for structures.% 3/10/98   dhb	  Change nBasesOut to nPrimaryBases.nPrimaryBases = cal.nPrimaryBases;if (isempty(nPrimaryBases))	error('No nPrimaryBases field present in calibration structure');endsettingsE = ExpandSettings(settings,nPrimaryBases);deviceE = SettingsToDevice(cal,settingsE);linear = DeviceToLinear(cal,deviceE);