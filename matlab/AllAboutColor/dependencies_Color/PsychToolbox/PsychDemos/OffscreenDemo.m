% OffscreenDemo%% This is a quick demo of the off-screen windows and CopyWindow.% All drawing (except the final instruction) is done to the offscreen % windows, which is then copied, by CopyWindow to the screen.%% See also MovieDemo.% 8/6/96  dgp  Wrote it.% 8/8/96  dhb  Cosmetic editing.% 8/9/96  dhb  Force it to use main screen.% 2/4/97  dhb  OpenWindow/OpenOffscreenWindow.% 2/23/97 dhb  Final 2.0 interface.% 4/15/97 dgp  Explicit screen numbers.% Open up the onscreen window and clear it.% If we open the screen first and force 8 bits,% then the OpenOffscreen will be set to the same% bitdepth.whichScreen = 0;[w,screenRect] = SCREEN(whichScreen,'OpenWindow',0,[],8);SCREEN(w,'SetClut',(0:255)'*ones(1,3));SCREEN(w,'FillRect',0);HideCursor;% Open up the offscreen world and draw into it.[o,oRect] = SCREEN(whichScreen,'OpenOffscreenWindow');SCREEN(o,'FillRect',0);SCREEN(o,'FillRect',255,SetRect(0,0,100,100));SCREEN(o,'FrameOval',128,oRect,10);SCREEN(o,'TextFont','Helvetica');SCREEN(o,'TextSize',128);SCREEN(o,'DrawText','Hello',100,200,255);% Get the image into a MATLAB matrixm = SCREEN(o,'GetImage',SetRect(0,0,30,30));% Copy from the offscreen window to the onscreen windowSCREEN('CopyWindow',o,w);% Make a smaller offscreen windowr=AlignRect(0.25*screenRect,screenRect,RectRight,RectBottom);[oo,ooRect] = SCREEN(whichScreen,'OpenOffscreenWindow',[],r);% Copy from offscreen to offscreen to shrink the image.SCREEN('CopyWindow',o,oo);% Blit the small image into successive onscreen locations.% This produces a moving copy of the large image and leaves% little tail behind it.for i=1:100	SCREEN('CopyWindow',oo,w,ooRect,r);	r=OffsetRect(r,-2,-2);endSCREEN(w,'TextSize',24);SCREEN(w,'DrawText','Click mouse to exit',10,screenRect(RectBottom)-10,255);% Wait for a mouse click and close all of the windowsGetClicks;ShowCursor;SCREEN(w,'Close')SCREEN(o,'Close')SCREEN(oo,'Close')