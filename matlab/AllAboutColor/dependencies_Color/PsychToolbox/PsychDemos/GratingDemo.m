function GratingDemo% GratingDemo shows how to use WhiteIndex, BlackIndex, and 'PutImage' to% display a grating of known contrast at any orientation and pixelSize.%% Denis Pelli, March 28, 1998% 7/1/99 dgp Arbitrary orientation% windowwhichScreen=0;window=SCREEN(whichScreen,'OpenWindow');white=WhiteIndex(window);black=BlackIndex(window);gray=(white+black)/2;if round(gray)==white	gray=black;endinc=white-gray;SCREEN(window,'FillRect',gray);% grating[x,y]=meshgrid(-100:100,-100:100);angle=17*pi/180; % 17 deg orientation; change it to whatever you want.f=0.03*2*pi;a=cos(angle)*f;b=sin(angle)*f;m=exp(-((x/50).^2)-((y/50).^2)).*sin(a*x+b*y);SCREEN(window,'PutImage',gray+inc*m);% pauseSCREEN(window,'TextFont','Helvetica');SCREEN(window,'TextSize',18);Ask(window,'Done. Hit return to quit.',black,gray,'GetString');SCREEN(window,'Close');