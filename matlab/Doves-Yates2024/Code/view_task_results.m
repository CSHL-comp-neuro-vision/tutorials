% Plots a Bar Chart Summary of an Observer's Task Results% Author    : Ian van der Linde% Date      : 5.08.2007clear, close all, clc;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        % Define Constants%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        DATA_DIR            = '../RawData/';NUM_TRIALS          = 101;YES                 = 1;NO                  = 0;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        % Initialise Counters%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        H                   = 0;M                   = 0;CR                  = 0;FA                  = 0;file_count          = 0;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        % Present Dialog to Select Input Files, then Open for Reading%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        [temp temp_dir] = uigetfile([DATA_DIR '*.eye'],'Please select eye file');if (~isstr(temp)) break; end;file_name_list{1} = temp;file_name           = [ DATA_DIR file_name_list{1}];      eye_fid             = fopen(file_name,'r');%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        % Read Task Data%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        for trials=1:NUM_TRIALS    % Read Eye Movement Data        [image_name,eye_x,eye_y,eye_pupil]  = read_vanhat_fixations(eye_fid);                               while(1)                       temp = fgets(eye_fid);        if strfind(temp,'Task Data')            break;        end       end    image_tmp               = fscanf(eye_fid, 'Image Used in Task: ');    temp                    = fgets(eye_fid);        fixation_temp           = fscanf(eye_fid, '\nFixation Type (-1=ran | 0=first fix | 1=last fix): ');    fixation_type(trials)   = fscanf(eye_fid, '%d\n');    x_temp                  = fscanf(eye_fid, 'X Coordinate: ');    x_coord(trials)         = fscanf(eye_fid, '%f\n');    y_temp                  = fscanf(eye_fid, '\nY Coordinate: ');    y_coord(trials)         = fscanf(eye_fid, '%f\n');    user_temp               = fscanf(eye_fid, '\nUser Response: ');    user_response(trials)   = fscanf(eye_fid, '%d');                                              end%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        % Interpret Task Data%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        % Note: fixation_type = [-1 is lure | 0 is target origin first fix | 1: target, origin last fix)for trials=1:NUM_TRIALS    if    ((fixation_type(trials)==-1)                           & (user_response(trials) == NO))        CR=CR+1;    elseif((fixation_type(trials)==-1)                           & (user_response(trials) == YES))        FA=FA+1;    elseif((fixation_type(trials)==0 | fixation_type(trials)==1) & (user_response(trials) == NO))        M=M+1;    elseif((fixation_type(trials)==0 | fixation_type(trials)==1) & (user_response(trials) == YES))        H=H+1;    end   endIncorrect   = M + FA;Correct     = H + CR;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        % Plot Bar Chart%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        results(1)  = H  / NUM_TRIALS;results(2)  = M  / NUM_TRIALS;results(3)  = FA / NUM_TRIALS;results(4)  = CR / NUM_TRIALS;results(5)  = Correct   / NUM_TRIALS;results(6)  = Incorrect / NUM_TRIALS;figure;bar([1:6], results(1:6),'b');hold on;bar([5:5], results(5:5),'g');bar([6:6], results(6:6),'r');%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        % Label Axes, Columns, and Chart Title%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        set(gca,'XTickLabel',['Ht';'Ms';'FA';'CR';'Co';'In']);title('Recognition Memory Task Performance');xlabel('Results Category');ylabel('Number of Results (%)');%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        % Plot Vertical Line to Divide [Ht Mm FA CR] From [Co In]%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        x = [4.5 4.5];y = [0 1];h = line(x,y);set(h,'Color','k');set(h,'LineWidth',2);