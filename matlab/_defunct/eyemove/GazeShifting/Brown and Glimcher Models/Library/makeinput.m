% input to this script should be in the workspace variable 'mdata'disp('making new movement specification matrices . . .');disp(mdata);timestep=0.001;clear sdata hspec trigspec vspec;global hspec trigspec vspec bighspec bigtspec bigvspec;hspec=0; vspec=0; trigspec=0;% sort movements by onset time[y,i]=sort(mdata(:,1));s=size(mdata);for j=1:s(1);  sdata(j,:)=mdata(i(j),:);end;% make mvement specification matrices for simulink inputhprev=0;vprev=0; % these initializers anchor the function at 0 to begin%disp(hspec);hspec(1,1:2)=[0,0];vspec(1,1:2)=[0,0];trigspec(1,1:2)=[0,0];trigspec(s(1)*4+2,1:2)=[100,0];for i=1:s(1);  hspec(i*2,1:2)=[sdata(i,1)-timestep,hprev];  hspec(i*2+1,1:2)=[sdata(i,1),sdata(i,2)];  vspec(i*2,1:2)=[sdata(i,1)-timestep,vprev];  vspec(i*2+1,1:2)=[sdata(i,1),sdata(i,3)];  trigspec(i*4-2,1:2)=[sdata(i,1)-timestep,0];  trigspec(i*4-1,1:2)=[sdata(i,1),1];  trigspec(i*4,1:2)=[sdata(i,1)+0.009-timestep,1];  trigspec(i*4+1,1:2)=[sdata(i,1)+0.009,0];  hprev=sdata(i,2);  vprev=sdata(i,3);end;hspec(s(1)*2+2,1:2)=[100,hprev];vspec(s(1)*2+2,1:2)=[100,vprev];% this section makes new-style spec matrices, used only by the most recent% simulation versionsbighspec=zeros(0.5/timestep)-1000;bigvspec=zeros(0.5/timestep)-1000;bigtspec=zeros(0.5/timestep)-1000;s=size(hspec);for j=1:s(1);	bighspec(hspec(j,1)*(0.5/timestep)+1)=hspec(j,2);    end;s=size(vspec);for j=1:s(1);	bigvspec(vspec(j,1)*(0.5/timestep)+1)=vspec(j,2);    end;s=size(trigspec);for j=1:s(1);	bigtspec(trigspec(j,1)*(0.5/timestep)+1)=trigspec(j,2);    end;