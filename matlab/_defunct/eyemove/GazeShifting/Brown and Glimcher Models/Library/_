global memdataglobal mvmntglobal movementglobal stimulate delayglobal model fileprefix% model='model_OPNgated'% fileprefix='O';delay=[0 0.036; 10 0.036]; % for the delayed-leak modelstimulate=[0 0; 10 0]; % OPN stimulator requires a valuefigure;for ii=8:-1:1  amp=ii*5  disp(sprintf('amplitude #%.0f',ii));  mdata=[0.1,amp,0];  fastmakeinput;  [t,x,y]=euler(model,0.3,[],[1e-5,1e-3,1e-3,[],[],1]);  movement(ii,1:10)=mvmnt(1,1:10);  trace=[t';y'];  % save the movement trace  filename=sprintf('amp%s%d.out',fileprefix,amp);  fid = fopen(filename,'w');  fprintf(fid,'%.3f %.2f\n',trace);  fclose(fid);  plot(trace(1,:),trace(2,:),'b.');  drawnow;  hold on;  end;% save analysisfilename=sprintf('amp%s.anl',fileprefix);fid = fopen(filename,'w');for ii=1:size(movement,1)  fprintf(fid,'%.1f, %.3f, %.1f, %.3f, %.3f, %.1f, %.1f, %.1f, %.1f, %.3f\n', movement(ii,:));  end;fclose(fid);eval(['print -depsc amp' fileprefix 'fig.ps']);eval(['print -dmfile amp' fileprefix 'fig.m']);hold off